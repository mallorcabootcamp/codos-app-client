(this["webpackJsonpcodos-app-client"]=this["webpackJsonpcodos-app-client"]||[]).push([[0],{137:function(e,t,a){},138:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},165:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),l=a.n(c),i=a(20),o=a(6),m=a(8),u=a(21),s=a(18),d=(a(94),1500),h=function(e){var t=e.eCoValue,a=Object(n.useMemo)((function(){return f(t)}),[t]),c=Object(n.useMemo)((function(){return v(t)}),[t]);return r.a.createElement("div",{className:"container pt-0 pb-4 mb-2 current-co2-elem"},r.a.createElement("div",{className:"text-center m-auto py-3 rounded-circle outer-circle",style:{backgroundColor:c}},r.a.createElement("div",{className:"text-center m-auto py-3 shadow rounded-circle inner-circle",style:{backgroundColor:a}},r.a.createElement("p",{className:"h5 p-0 m-0 text-white pt-5 mt-2 eco-elem"},"eCO\xb2"),r.a.createElement("p",{className:"h3 p-0 m-0 text-white mt-1"},r.a.createElement("span",null,t)," ppm"))))},f=function(e){return"hsl(".concat(e<=d?145*(1-e/d):0,",63%,49%)")},v=function(e){return"hsl(".concat(e<=d?145*(1-e/d):0,",62%,59%)")},p="thermometer",b="humidity",E=(a(95),function(e){var t=e.value,a=e.icon;return r.a.createElement("p",{className:"icon-elem"},r.a.createElement(u.a,{icon:O(a),size:"lg"})," ",r.a.createElement("span",{className:"value-elem"},t))}),O=function(e){switch(e){case b:return s.f;case p:return s.d;default:return s.f}},g=a(27),N=a.n(g),j=a(32),w=a(200),k=a(201),x=a(203),y=a(198),M=a(199),D=a(196),S=a(197),C=a(11),T=a.n(C),V=(a(97),"#878a8c"),F={dx:"0em",dy:"-0.2em",textAnchor:"middle",fontFamily:"Montserrat",fontSize:10,fill:V},Y={dx:"0.4em",fontFamily:"Montserrat",fontSize:10,textAnchor:"end",fill:V},A=function(e){var t=e.endTimeValue,a=e.width,c=e.historicalValues,l=e.uom,i=e.marginY,o=e.marginX,m=e.height,u=e.timeFormat,s=e.bottomAxisNumTicks,d={startTime:0,endTime:t},h=c,f=function(e){return new Date(1e3*parseInt(e.time))},v=a-o,p=m-i,b=Object(n.useMemo)((function(){return Object(k.a)({range:[o,v+o],domain:[1,d.endTime]})}),[v,o,d.endTime]),E=Object(n.useMemo)((function(){return Object(k.a)({domain:[Math.max.apply(Math,Object(j.a)(h.map((function(e){return e.value})))),Math.min.apply(Math,Object(j.a)(h.map((function(e){return e.value}))))],range:[0,p-i]})}),[p,i,h]),O=Object(n.useMemo)((function(){return Object(x.a)({range:[o,v+o],domain:Object(D.a)(h,f)})}),[v,o,h]),g=Object(n.useMemo)((function(){return Object(x.a)({range:[o,v+o],domain:Object(D.a)(h,f)})}),[v,o,h]),N=Object(n.useMemo)((function(){return Object(k.a)({range:[i,p],domain:[Math.min.apply(Math,Object(j.a)(h.map((function(e){return Math.min(e.value)})))),Math.max.apply(Math,Object(j.a)(h.map((function(e){return Math.max(e.value)}))))],reverse:!0})}),[p,i,h]);return r.a.createElement("div",{className:"text-left time-with-values-graph-elem"},r.a.createElement("svg",{width:a+i,height:m},r.a.createElement(w.a,{data:h,x:function(e){var t;return null!==(t=g(f(e)))&&void 0!==t?t:0},y:function(e){var t;return null!==(t=N(function(e){return e.value}(e)))&&void 0!==t?t:0},yScale:N,fill:"#bdc3c7"}),r.a.createElement(S.a,{scale:b,height:p-i,top:i,numTicks:d.endTime,stroke:V,strokeWidth:1.5}),r.a.createElement(y.a,{top:p,scale:O,numTicks:s,stroke:V,hideTicks:!0,tickStroke:V,tickLabelProps:function(){return F},tickFormat:function(e){return T()(e).format(u)}}),r.a.createElement(M.a,{top:i,left:o,scale:E,numTicks:3,hideTicks:!0,stroke:V,tickStroke:V,tickLabelProps:function(){return Y},tickFormat:function(e){return"".concat(e," ").concat(l)}})))},H=a(5),P=a.n(H),z=(a(137),function(e){var t=e.children,a=e.className,n=P()("card-elem",a);return r.a.createElement("div",{className:n},t)}),I=(a(138),a(16)),B=a.n(I),L=a(31),X=a(74),q=a(75),G=a(76),R=a.n(G),W="http://localhost:3100/",J=function(){function e(){Object(X.a)(this,e)}return Object(q.a)(e,null,[{key:"makeGetRequest",value:function(){var e=Object(L.a)(B.a.mark((function e(t,a,n,r,c,l){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R()({method:"get",url:W+t,params:{fromDate:n,toDate:r,user:a,aggregateTimeScale:c,dataToGet:l}}).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c,l){return e.apply(this,arguments)}}()},{key:"getPeriodData",value:function(){var t=Object(L.a)(B.a.mark((function t(a,n,r,c,l){var i,o;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Math.round(T()(a).valueOf()/1e3),o=Math.round(T()(n).valueOf()/1e3),t.abrupt("return",e.makeGetRequest("period/data",r,i,o,c,l));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n,r,c){return t.apply(this,arguments)}}()},{key:"getUsersList",value:function(){var e=Object(L.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(["@erguro1973","Andreas_IBZ","@Andreas_IBZ"]));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getCurrentData",value:function(){var t=Object(L.a)(B.a.mark((function t(a,n){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.makeGetRequest("current/data",a,void 0,void 0,void 0,n));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}]),e}();J.user=void 0;a(155);var U,Z=function(e){var t=e.onClickOnClose,a=e.onClickOnDevice,n=e.devices,c=e.activeDevice;return r.a.createElement("div",{className:"side-menu"},r.a.createElement("div",{className:"row top d-flex p-3 pl-4 justify-content-between align-items-center text-center"},r.a.createElement("p",{className:"col ml-5 mt-4 font-weight-bold"},"CODOS APP"),r.a.createElement("div",{className:"close-button border-0 mr-4",onClick:t},r.a.createElement(u.a,{icon:s.e,size:"lg"}))),r.a.createElement("div",{className:"row menu my-5 ml-5 d-flex flex-column "},r.a.createElement("p",{className:"font-weight-bold pb-4 h5"},"Listado de dispositivos"),r.a.createElement("ul",{className:"list-unstyled"},n.map((function(e){return r.a.createElement("li",{key:e,className:"border-0 my-2 px-0 ".concat(e===c&&"menu-button-actived"," menu-button"),onClick:function(){return a(e)}},e)})))),r.a.createElement("hr",{className:"ml-5 text-left font-weight-bold"}),r.a.createElement("div",{className:"row about ml-5 mt-5 font-weight-bold"},r.a.createElement("p",null,"About")))},_=a(202),$=(a(156),function(e){var t=e.children,a=e.isVisible;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{in:a,timeout:1e3,classNames:"lateral",unmountOnExit:!0},t))}),K=function(e){var t=Object(n.useState)(localStorage.getItem(e)||""),a=Object(m.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){localStorage.setItem(e,r)}),[r,e]),[r,c]},Q=function(e,t){var a=Math.round(T()(t).valueOf()/1e3)-Math.round(T()(e).valueOf()/1e3),n=T()().valueOf()/1e3-T()().subtract(3,"days").valueOf()/1e3,r=T()().valueOf()/1e3-T()().subtract(3,"months").valueOf()/1e3,c=T()().valueOf()/1e3-T()().subtract(7,"months").valueOf()/1e3;return a<n?"1h":a>n&&a<r?"1d":a>r&&a<c?"1w":"4w"};!function(e){e.co2="co2",e.temperature="temperature",e.humidity="humidity"}(U||(U={}));var ee=function(){var e=K("deviceSelected"),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),d=Object(m.a)(l,2),f=d[0],v=d[1],O=Object(n.useState)(0),g=Object(m.a)(O,2),j=g[0],w=g[1],k=Object(n.useState)(0),x=Object(m.a)(k,2),y=x[0],M=x[1],D=Object(n.useState)(0),S=Object(m.a)(D,2),C=S[0],V=S[1],F=Object(n.useState)([]),Y=Object(m.a)(F,2),H=Y[0],P=Y[1],I=Object(n.useState)([]),B=Object(m.a)(I,2),L=B[0],X=B[1],q=Object(n.useState)(!1),G=Object(m.a)(q,2),R=G[0],W=G[1];Object(n.useEffect)((function(){J.getUsersList().then((function(e){X(e)}))}),[]),Object(n.useEffect)((function(){var e=T()().subtract(7,"hour").format("YYYY-MM-DD HH:mm"),t=T()().format("YYYY-MM-DD HH:mm");if(a){var n=Q(e,t);J.getCurrentData(a,U.co2).then((function(e){w(e[0].value)})).catch((function(){return W(!0)})),J.getCurrentData(a,U.temperature).then((function(e){M(e[0].value)})).catch(),J.getCurrentData(a,U.humidity).then((function(e){V(e[0].value)})).catch((function(){return W(!0)})),J.getPeriodData(e,t,a,n,U.co2).then((function(e){P(e)})).catch((function(){return W(!0)}))}}),[a]);return r.a.createElement("div",null,R&&r.a.createElement(o.a,{to:"/unexpected-error/main"}),r.a.createElement("div",{className:"container"},r.a.createElement($,{isVisible:f},r.a.createElement(Z,{activeDevice:a,devices:L,onClickOnClose:function(){return v(!1)},onClickOnDevice:function(e){c(e),v(!1)}})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col ml-4 pt-4 mt-3 h4 mb-0 d-inline menu-elem"},r.a.createElement("p",{className:"mb-0 d-inline",onClick:function(){return v(!0)}},r.a.createElement(u.a,{icon:s.a,size:"lg"}))))),!a&&r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col px-5 py-3 pt-5 mt-3"},r.a.createElement("h4",{className:"select-a-device"},"Acceda al men\xfa lateral y seleccione un dispositivo")))),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{eCoValue:Math.round(j)}),r.a.createElement("div",{className:"container px-5 text-center"},r.a.createElement(z,null,r.a.createElement("div",{className:"row icon-with-value-elem"},r.a.createElement("div",{className:"col"},r.a.createElement(E,{value:"".concat(Math.round(y),"\xba"),icon:p})),r.a.createElement("div",{className:"col"},r.a.createElement(E,{value:"".concat(Math.round(C),"%"),icon:b}))))),r.a.createElement("div",{className:"container px-5 pt-3 mt-4 mb-4 pb-2"},r.a.createElement(z,{className:"graph-elem"},r.a.createElement("p",{className:"text-elem pt-3 pl-2 mb-3"},"\xdaltimas ",8," horas"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-center"},r.a.createElement(N.a,{className:"graph-elem"},(function(e){var t=e.width;return r.a.createElement(A,{endTimeValue:8,uom:"ppm",timeFormat:"H:mm",marginY:20,marginX:60,historicalValues:H,bottomAxisNumTicks:7,width:t-20,height:160})})))))),r.a.createElement("div",{className:"container pt-1 pb-5"},r.a.createElement("div",{className:"text-center m-auto rounded-circle search-elem"},r.a.createElement(i.b,{to:"/history",className:"search-link"},r.a.createElement(u.a,{icon:s.c,size:"lg"}))))))},te=(a(165),a(78)),ae=a.n(te),ne=function(e){var t=e.text,a=e.date,c=e.onDateChanged,l=Object(n.useMemo)((function(){return ae.a.generate()}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"pt-2 date-picker-text",htmlFor:l},t,":"),r.a.createElement("input",{value:a,className:"date-picker-input",onChange:function(e){var t=e.target;return c(t.value)},name:t,type:"date",id:l}))},re=(a(174),function(e){var t=e.value,a=e.children;return r.a.createElement("div",{className:"py-4"},r.a.createElement("div",{className:"card-tab inline d-inline-block px-3 py-1 text-center"},t),r.a.createElement("div",{className:"card-with-text-tab"},a))}),ce=(a(175),function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),d=Object(m.a)(l,2),h=d[0],f=d[1],v=Object(n.useState)(),p=Object(m.a)(v,2),b=p[0],E=p[1],O=Object(n.useState)(),g=Object(m.a)(O,2),j=g[0],w=g[1],k=Object(n.useState)(),x=Object(m.a)(k,2),y=x[0],M=x[1],D=K("deviceSelected"),S=Object(m.a)(D,1)[0],C=Object(n.useState)(),T=Object(m.a)(C,2),V=T[0],F=T[1],Y=Object(n.useState)(!1),H=Object(m.a)(Y,2),P=H[0],z=H[1];return r.a.createElement("div",{className:"container history-elem-container"},P&&r.a.createElement(o.a,{to:"/unexpected-error/history"}),r.a.createElement("div",{className:"row"},r.a.createElement(i.b,{to:"/",className:"ml-4 mt-4 rounded-circle arrow-back-elem"},r.a.createElement(u.a,{icon:s.b,size:"lg"}))),r.a.createElement("div",{className:"row"},r.a.createElement("h1",{className:"text-center history-text-elem"},"Hist\xf3rico")),r.a.createElement("div",{className:"row date-range-pickers-container pt-3 mt-3"},r.a.createElement("div",{className:"col mx-4 my-3"},r.a.createElement(ne,{date:a,onDateChanged:function(e){return c(e)},text:"Desde"}),r.a.createElement(ne,{date:h,onDateChanged:function(e){return f(e)},text:"Hasta"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col pl-4 ml-3 my-3"},r.a.createElement("button",{className:"search-button btn",disabled:!a||!h,onClick:function(){var e=Q(a,h);F(e),J.getPeriodData(a,h,S,e,U.co2).then((function(e){return E(e)})).catch((function(){return z(!0)})),J.getPeriodData(a,h,S,e,U.temperature).then((function(e){return w(e)})).catch((function(){return z(!0)})),J.getPeriodData(a,h,S,e,U.humidity).then((function(e){return M(e)})).catch((function(){return z(!0)}))}},"Buscar "))),j&&y&&b&&r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{value:"eCO\xb2"},r.a.createElement("div",{className:"row"},r.a.createElement(N.a,{className:"history-graph-elem"},(function(e){var t=e.width;return r.a.createElement(A,{endTimeValue:10,uom:"ppm",timeFormat:"1h"===V?"H:mm":"DD-MM",marginY:20,marginX:55,historicalValues:b,bottomAxisNumTicks:5,width:t-20,height:118})})))),r.a.createElement(re,{value:"Temp."},r.a.createElement("div",{className:"row"},r.a.createElement(N.a,{className:"history-graph-elem"},(function(e){var t=e.width;return r.a.createElement(A,{endTimeValue:10,uom:"\xbaC",timeFormat:"1h"===V?"H:mm":"DD-MM",marginY:20,marginX:55,historicalValues:j,bottomAxisNumTicks:5,width:t-20,height:118})})))),r.a.createElement(re,{value:"Humidity"},r.a.createElement("div",{className:"row"},r.a.createElement(N.a,{className:"history-graph-elem"},(function(e){var t=e.width;return r.a.createElement(A,{endTimeValue:10,uom:"%",timeFormat:"1h"===V?"H:mm":"DD-MM",marginY:20,marginX:55,historicalValues:y,bottomAxisNumTicks:5,width:t-20,height:118})}))))))}),le=function(){var e=Object(o.h)().route;return r.a.createElement("div",null,r.a.createElement("p",null,"Parece que algo no fue como esperabamos..."),r.a.createElement("button",{className:"btn btn-dark"},r.a.createElement(i.b,{to:"/".concat(e),className:"search-link"}," Volver")," "))},ie=function(e){var t=e.children,a=Object(o.g)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[a]),t};a(176);var oe=function(){return r.a.createElement(i.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/history"},r.a.createElement(ie,null,r.a.createElement(ce,null))),r.a.createElement(o.b,{path:["/","/main"],exact:!0},r.a.createElement(ie,null,r.a.createElement(ee,null))),r.a.createElement(o.b,{path:"/unexpected-error/:route",component:le})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},94:function(e,t,a){},95:function(e,t,a){},97:function(e,t,a){}},[[177,1,2]]]);
//# sourceMappingURL=main.1abd77ac.chunk.js.map