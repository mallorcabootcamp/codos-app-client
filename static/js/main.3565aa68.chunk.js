(this["webpackJsonpcodos-app-client"]=this["webpackJsonpcodos-app-client"]||[]).push([[0],{100:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},169:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},194:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),l=a.n(c),i=a(21),o=a(7),m=a(5),u=a(19),s=a(15),d=(a(97),1500),v=function(e){var t=e.eCoValue,a=Object(n.useMemo)((function(){return h(t)}),[t]),c=Object(n.useMemo)((function(){return f(t)}),[t]);return r.a.createElement("div",{className:"container pt-0 pb-4 mb-2 current-co2-elem"},r.a.createElement("div",{className:"text-center m-auto py-3 rounded-circle outer-circle",style:{backgroundColor:c}},r.a.createElement("div",{className:"text-center m-auto py-3 shadow rounded-circle inner-circle",style:{backgroundColor:a}},r.a.createElement("p",{className:"h5 p-0 m-0 text-white pt-5 mt-2 eco-elem"},"eCO\xb2"),r.a.createElement("p",{className:"h3 p-0 m-0 text-white mt-1"},r.a.createElement("span",null,t)," ppm"))))},h=function(e){return"hsl(".concat(e<=d?145*(1-e/d):0,",63%,49%)")},f=function(e){return"hsl(".concat(e<=d?145*(1-e/d):0,",62%,59%)")},p="thermometer",b="humidity",E=(a(98),function(e){var t=e.value,a=e.icon;return r.a.createElement("p",{className:"icon-elem"},r.a.createElement(u.a,{icon:g(a),size:"lg"})," ",r.a.createElement("span",{className:"value-elem"},t))}),g=function(e){switch(e){case b:return s.g;case p:return s.e;default:return s.g}},O=a(27),N=a.n(O),j=a(32),w=a(217),x=a(218),k=a(220),y=a(215),M=a(216),D=a(213),S=a(214),T=a(11),C=a.n(T),V=(a(100),"#878a8c"),F={dx:"0em",dy:"-0.2em",textAnchor:"middle",fontFamily:"Montserrat",fontSize:10,fill:V},Y={dx:"0.4em",fontFamily:"Montserrat",fontSize:10,textAnchor:"end",fill:V},A=function(e){var t=e.endTimeValue,a=e.width,c=e.historicalValues,l=e.uom,i=e.marginY,o=e.marginX,m=e.height,u=e.timeFormat,s=e.bottomAxisNumTicks,d={startTime:0,endTime:t},v=c,h=function(e){return new Date(1e3*parseInt(e.time))},f=a-o,p=m-i,b=Object(n.useMemo)((function(){return Object(x.a)({range:[o,f+o],domain:[1,d.endTime]})}),[f,o,d.endTime]),E=Object(n.useMemo)((function(){return Object(x.a)({domain:[Math.max.apply(Math,Object(j.a)(v.map((function(e){return e.value})))),Math.min.apply(Math,Object(j.a)(v.map((function(e){return e.value}))))],range:[0,p-i]})}),[p,i,v]),g=Object(n.useMemo)((function(){return Object(k.a)({range:[o,f+o],domain:Object(D.a)(v,h)})}),[f,o,v]),O=Object(n.useMemo)((function(){return Object(k.a)({range:[o,f+o],domain:Object(D.a)(v,h)})}),[f,o,v]),N=Object(n.useMemo)((function(){return Object(x.a)({range:[i,p],domain:[Math.min.apply(Math,Object(j.a)(v.map((function(e){return Math.min(e.value)})))),Math.max.apply(Math,Object(j.a)(v.map((function(e){return Math.max(e.value)}))))],reverse:!0})}),[p,i,v]);return r.a.createElement("div",{className:"text-left time-with-values-graph-elem"},r.a.createElement("svg",{width:a+i,height:m},r.a.createElement(w.a,{data:v,x:function(e){var t;return null!==(t=O(h(e)))&&void 0!==t?t:0},y:function(e){var t;return null!==(t=N(function(e){return e.value}(e)))&&void 0!==t?t:0},yScale:N,fill:"#bdc3c7"}),r.a.createElement(S.a,{scale:b,height:p-i,top:i,numTicks:d.endTime,stroke:V,strokeWidth:1.5}),r.a.createElement(y.a,{top:p,scale:g,numTicks:s,stroke:V,hideTicks:!0,tickStroke:V,tickLabelProps:function(){return F},tickFormat:function(e){return C()(e).format(u)}}),r.a.createElement(M.a,{top:i,left:o,scale:E,numTicks:3,hideTicks:!0,stroke:V,tickStroke:V,tickLabelProps:function(){return Y},tickFormat:function(e){return"".concat(e," ").concat(l)}})))},H=a(6),P=a.n(H),z=(a(140),function(e){var t=e.children,a=e.className,n=P()("card-elem",a);return r.a.createElement("div",{className:n},t)}),_=(a(141),a(17)),G=a.n(_),L=a(31),X=a(76),q=a(77),I=a(78),R=a.n(I),B="http://134.209.80.241:3100/",W=function(){function e(){Object(X.a)(this,e)}return Object(q.a)(e,null,[{key:"makeGetRequest",value:function(){var e=Object(L.a)(G.a.mark((function e(t,a,n,r,c,l){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R()({method:"get",url:B+t,params:{fromDate:n,toDate:r,user:a,aggregateTimeScale:c,dataToGet:l}}).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c,l){return e.apply(this,arguments)}}()},{key:"getPeriodData",value:function(){var t=Object(L.a)(G.a.mark((function t(a,n,r,c,l){var i,o;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Math.round(C()(a).valueOf()/1e3),o=Math.round(C()(n).valueOf()/1e3),t.abrupt("return",e.makeGetRequest("data/period",r,i,o,c,l));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n,r,c){return t.apply(this,arguments)}}()},{key:"getUsersList",value:function(){var t=Object(L.a)(G.a.mark((function t(){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.makeGetRequest("users"));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getCurrentData",value:function(){var t=Object(L.a)(G.a.mark((function t(a,n){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.makeGetRequest("data/current",a,void 0,void 0,void 0,n));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}]),e}();W.user=void 0;a(158);var J,U=function(e){var t=e.onClickOnClose,a=e.onClickOnDevice,n=e.devices,c=e.activeDevice;return r.a.createElement("div",{className:"side-menu"},r.a.createElement("div",{className:"row top d-flex p-3 pl-4 justify-content-between align-items-center text-center"},r.a.createElement("p",{className:"col ml-5 mt-4 font-weight-bold"},"CODOS APP"),r.a.createElement("div",{className:"close-button border-0 mr-4",onClick:t},r.a.createElement(u.a,{icon:s.f,size:"lg"}))),r.a.createElement("div",{className:"row menu my-5 ml-5 d-flex flex-column "},r.a.createElement("p",{className:"font-weight-bold pb-4 h5"},"Listado de dispositivos"),r.a.createElement("ul",{className:"list-unstyled"},n.map((function(e){return r.a.createElement("li",{key:e,className:"border-0 my-2 px-0 ".concat(e===c&&"menu-button-actived"," menu-button"),onClick:function(){return a(e)}},e)})))),r.a.createElement("hr",{className:"ml-5 text-left font-weight-bold"}),r.a.createElement("div",{className:"row about ml-5 mt-5 font-weight-bold"},r.a.createElement("p",null,"About")))},$=a(219),K=(a(159),function(e){var t=e.children,a=e.isVisible;return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{in:a,timeout:1e3,classNames:"lateral",unmountOnExit:!0},t))}),Q=function(e){var t=Object(n.useState)(localStorage.getItem(e)||""),a=Object(m.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){localStorage.setItem(e,r)}),[r,e]),[r,c]},Z=function(e,t){var a=Math.round(C()(t).valueOf()/1e3)-Math.round(C()(e).valueOf()/1e3),n=C()().valueOf()/1e3-C()().subtract(3,"days").valueOf()/1e3,r=C()().valueOf()/1e3-C()().subtract(3,"months").valueOf()/1e3,c=C()().valueOf()/1e3-C()().subtract(7,"months").valueOf()/1e3;return a<n?"1h":a>n&&a<r?"1d":a>r&&a<c?"1w":"4w"};!function(e){e.co2="co2",e.temperature="temperature",e.humidity="humidity"}(J||(J={}));a(160);var ee=function(e){var t=e.color;return r.a.createElement("div",{className:"text-center loading py-5 ".concat(t)},r.a.createElement(u.a,{icon:s.d,size:"lg"}))},te=function(){var e=Q("deviceSelected"),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),d=Object(m.a)(l,2),h=d[0],f=d[1],g=Object(n.useState)(0),O=Object(m.a)(g,2),j=O[0],w=O[1],x=Object(n.useState)(0),k=Object(m.a)(x,2),y=k[0],M=k[1],D=Object(n.useState)(0),S=Object(m.a)(D,2),T=S[0],V=S[1],F=Object(n.useState)([]),Y=Object(m.a)(F,2),H=Y[0],P=Y[1],_=Object(n.useState)([]),G=Object(m.a)(_,2),L=G[0],X=G[1],q=Object(n.useState)(!1),I=Object(m.a)(q,2),R=I[0],B=I[1],$=Object(n.useState)(!0),te=Object(m.a)($,2),ae=te[0],ne=te[1];Object(n.useEffect)((function(){W.getUsersList().then((function(e){X(e)}))}),[]),Object(n.useEffect)((function(){var e=C()().subtract(7,"hour").format("YYYY-MM-DD HH:mm"),t=C()().format("YYYY-MM-DD HH:mm");if(a){var n=Z(e,t),r=W.getCurrentData(a,J.co2),c=W.getCurrentData(a,J.temperature),l=W.getCurrentData(a,J.humidity),i=W.getPeriodData(e,t,a,n,J.co2);Promise.all([r,c,l,i]).then((function(e){var t=Object(m.a)(e,4),a=t[0],n=t[1],r=t[2],c=t[3];ne(!1),w(a[0].value),M(n[0].value),V(r[0].value),P(c)})).catch((function(){return B(!0)}))}}),[a]);return R?r.a.createElement(o.a,{to:"/unexpected-error?redirectTo=/"}):ae&&a?r.a.createElement("div",{className:"container is-loading-container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col is-loading"},r.a.createElement(ee,{color:"loading-dark"})))):r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement(K,{isVisible:h},r.a.createElement(U,{activeDevice:a,devices:L,onClickOnClose:function(){return f(!1)},onClickOnDevice:function(e){c(e),f(!1)}})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col ml-4 pt-4 mt-3 h4 mb-0 d-inline menu-elem"},r.a.createElement("p",{className:"mb-0 d-inline",onClick:function(){return f(!0)}},r.a.createElement(u.a,{icon:s.a,size:"lg"}))))),!a&&r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col px-5 py-3 pt-5 mt-3"},r.a.createElement("h4",{className:"select-a-device"},"Acceda al men\xfa lateral y seleccione un dispositivo")))),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{eCoValue:Math.round(j)}),r.a.createElement("div",{className:"container px-5 text-center"},r.a.createElement(z,null,r.a.createElement("div",{className:"row icon-with-value-elem"},r.a.createElement("div",{className:"col"},r.a.createElement(E,{value:"".concat(Math.round(y),"\xba"),icon:p})),r.a.createElement("div",{className:"col"},r.a.createElement(E,{value:"".concat(Math.round(T),"%"),icon:b}))))),r.a.createElement("div",{className:"container px-5 pt-3 mt-4 mb-4 pb-2"},r.a.createElement(z,{className:"graph-elem"},r.a.createElement("p",{className:"text-elem pt-3 pl-2 mb-3"},"\xdaltimas ",8," horas"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-center"},r.a.createElement(N.a,{className:"graph-elem"},(function(e){var t=e.width;return r.a.createElement(A,{endTimeValue:8,uom:"ppm",timeFormat:"H:mm",marginY:20,marginX:60,historicalValues:H,bottomAxisNumTicks:7,width:t-20,height:160})})))))),r.a.createElement("div",{className:"container pt-1 pb-5"},r.a.createElement("div",{className:"text-center m-auto rounded-circle search-elem"},r.a.createElement(i.b,{to:"/history",className:"search-link"},r.a.createElement(u.a,{icon:s.c,size:"lg"}))))))},ae=(a(169),a(80)),ne=a.n(ae),re=function(e){var t=e.text,a=e.date,c=e.onDateChanged,l=Object(n.useMemo)((function(){return ne.a.generate()}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"pt-2 date-picker-text",htmlFor:l},t,":"),r.a.createElement("input",{value:a,className:"date-picker-input",onChange:function(e){var t=e.target;return c(t.value)},name:t,type:"date",id:l}))},ce=(a(178),function(e){var t=e.value,a=e.children;return r.a.createElement("div",{className:"py-4"},r.a.createElement("div",{className:"card-tab inline d-inline-block px-3 py-1 text-center"},t),r.a.createElement("div",{className:"card-with-text-tab"},a))}),le=(a(179),function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),d=Object(m.a)(l,2),v=d[0],h=d[1],f=Object(n.useState)(),p=Object(m.a)(f,2),b=p[0],E=p[1],g=Object(n.useState)(),O=Object(m.a)(g,2),j=O[0],w=O[1],x=Object(n.useState)(),k=Object(m.a)(x,2),y=k[0],M=k[1],D=Q("deviceSelected"),S=Object(m.a)(D,1)[0],T=Object(n.useState)(),C=Object(m.a)(T,2),V=C[0],F=C[1],Y=Object(n.useState)(!1),H=Object(m.a)(Y,2),P=H[0],z=H[1],_=Object(n.useState)(!1),G=Object(m.a)(_,2),L=G[0],X=G[1];return P?r.a.createElement(o.a,{to:"/unexpected-error?redirectTo=history"}):r.a.createElement("div",{className:"container history-elem-container"},r.a.createElement("div",{className:"row"},r.a.createElement(i.b,{to:"/",className:"ml-4 mt-4 rounded-circle arrow-back-elem"},r.a.createElement(u.a,{icon:s.b,size:"lg"}))),r.a.createElement("div",{className:"row"},r.a.createElement("h1",{className:"text-center history-text-elem"},"Hist\xf3rico")),r.a.createElement("div",{className:"row date-range-pickers-container pt-3 mt-3"},r.a.createElement("div",{className:"col mx-4 my-3"},r.a.createElement(re,{date:a,onDateChanged:function(e){return c(e)},text:"Desde"}),r.a.createElement(re,{date:v,onDateChanged:function(e){return h(e)},text:"Hasta"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col pl-4 ml-3 my-3"},r.a.createElement("button",{className:"search-button btn",disabled:!a||!v,onClick:function(){E(void 0),w(void 0),M(void 0),X(!0);var e=Z(a,v);F(e);var t=W.getPeriodData(a,v,S,e,J.co2),n=W.getPeriodData(a,v,S,e,J.temperature),r=W.getPeriodData(a,v,S,e,J.humidity);Promise.all([t,n,r]).then((function(e){var t=Object(m.a)(e,3),a=t[0],n=t[1],r=t[2];X(!1),E(a),w(n),M(r)})).catch((function(){return z(!0)}))}},"Buscar "))),L&&r.a.createElement(ee,{color:"loading-white"}),j&&y&&b&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,{value:"eCO\xb2"},r.a.createElement("div",{className:"row"},r.a.createElement(N.a,{className:"history-graph-elem"},(function(e){var t=e.width;return r.a.createElement(A,{endTimeValue:10,uom:"ppm",timeFormat:"1h"===V?"H:mm":"DD-MM",marginY:20,marginX:55,historicalValues:b,bottomAxisNumTicks:5,width:t-20,height:118})})))),r.a.createElement(ce,{value:"Temp."},r.a.createElement("div",{className:"row"},r.a.createElement(N.a,{className:"history-graph-elem"},(function(e){var t=e.width;return r.a.createElement(A,{endTimeValue:10,uom:"\xbaC",timeFormat:"1h"===V?"H:mm":"DD-MM",marginY:20,marginX:55,historicalValues:j,bottomAxisNumTicks:5,width:t-20,height:118})})))),r.a.createElement(ce,{value:"Humidity"},r.a.createElement("div",{className:"row"},r.a.createElement(N.a,{className:"history-graph-elem"},(function(e){var t=e.width;return r.a.createElement(A,{endTimeValue:10,uom:"%",timeFormat:"1h"===V?"H:mm":"DD-MM",marginY:20,marginX:55,historicalValues:y,bottomAxisNumTicks:5,width:t-20,height:118})}))))))}),ie=a.p+"static/media/unexpected-error.49148320.png",oe=a(81),me=(a(192),function(){var e=Object(o.g)(),t=Object(oe.parse)(e.search).redirectTo;return r.a.createElement("div",{className:"container pt-5 parent-unexcected-error"},r.a.createElement("div",{className:"unexpected-error"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"m-auto unexpected-error__text"},r.a.createElement("p",{className:"font-weight-bold h5 py-3"},"\xa1Vaya!"),r.a.createElement("p",{className:"unexpected-error__down-text"},"Algo no fue como esper\xe1bamos")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col px-5 unexpected-error__robot-img"},r.a.createElement("img",{src:ie,alt:"robot"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-center m-5"},r.a.createElement("button",{className:"btn mt-3 py-2 px-5 font-weight-bold unexpected-error__button"},r.a.createElement(i.b,{to:t||"/",className:"search-link"},"Volver")," ")))))}),ue=function(e){var t=e.children,a=Object(o.g)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[a]),t};a(193);var se=function(){return r.a.createElement(i.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/history"},r.a.createElement(ue,null,r.a.createElement(le,null))),r.a.createElement(o.b,{path:"/",exact:!0},r.a.createElement(ue,null,r.a.createElement(te,null))),r.a.createElement(o.b,{path:"/unexpected-error",component:me})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},97:function(e,t,a){},98:function(e,t,a){}},[[194,1,2]]]);
//# sourceMappingURL=main.3565aa68.chunk.js.map